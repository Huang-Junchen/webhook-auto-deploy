version: '3.8'

services:
  webhook:
    build: .
    container_name: webhook-auto-deploy
    ports:
      - "5000:5000"
    environment:
      - WEBHOOK_SECRET=your-strong-password-here  # 请修改为强密码
      - WEBHOOK_PORT=5000
      - LOG_LEVEL=INFO
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock  # Docker socket
      - ./config.py:/app/config.py:ro              # 配置文件
      - /volume1:/volume1                          # 项目目录（读写，Git 需要）
      - /volume2:/volume2                          # 第二个卷（如果有）
    restart: unless-stopped
    networks:
      - webhook-net

networks:
  webhook-net:
    driver: bridge
