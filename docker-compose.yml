version: '3.8'

services:
  webhook:
    build: .
    container_name: webhook-auto-deploy
    ports:
      - "5000:5000"
    environment:
      - WEBHOOK_SECRET=your-strong-password-here  # 请修改为强密码
      - WEBHOOK_PORT=5000
      - LOG_LEVEL=INFO
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock  # Docker socket
      - ./config.py:/app/config.py:ro              # 配置文件
      - /volume1/docker:/volume1/docker            # 只挂载 docker 文件夹（读写）
      - /volume2/docker:/volume2/docker            # 如果有第二个卷的 docker 文件夹
    restart: unless-stopped
    networks:
      - webhook-net

networks:
  webhook-net:
    driver: bridge
